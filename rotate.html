<!doctype html>
<body>
<style>
body {
    background-color: #333;
    margin: 0;
    padding: 0;
}
#countdown {
    height: 5px;
}
#countdown.reset {
    background: #333;
    width: 100%;
}
#countdown.burndown {
    -webkit-transition: all 60s linear;
    transition: all 60s linear;
    background: #BA0002;
    width: 1px;
}
#frame {
    border: 0;
    width: 100%;
    height: 100%;
}

#frame.hidden{
    opacity: 0;
    transition: opacity 250ms;
}

#frame.shown {
    opacity: 1;
    transition: opacity 250ms;
}
</style>
<div id="countdown" class="reset"></div>
<iframe id="frame"></iframe>
<script>
var current = 0;
var countdown = document.getElementById("countdown")
var frame = document.getElementById("frame");
frame.style.height = (window.innerHeight - 5) + "px";
var set_url = function() {
    var url = localStorage.getItem("rotate_URL_" + current);
    if(!url) {
        current = 0;
        url = localStorage.getItem("rotate_URL_" + current);
    }
    if(url) {
        frame.className = "hidden";
        window.setTimeout(function(){
            countdown.className = "reset";
            frame.src = url;
            window.setTimeout(function(){
                frame.className = "shown";
                countdown.className = "burndown";
            }, 300);
        }, 300);
        current ++;
    }
};

window.setInterval(set_url, 60000);
set_url();
</script>
</body>
</html>
