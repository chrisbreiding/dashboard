<!doctype html>
<body>
<style>
  body {
   background-color: #333;
   margin: 0;
   padding: 0;
  }
  #countdown {
    background: #628894;
    height: 5px;
  }
  .reset {
    width: 100%;
  }
  .burndown {
    -webkit-transition: all 60s ease-in-out;
    transition: all 60s ease-in-out;
    width: 1px;
  }
  #frame {
    border: 0;
    width: 100%;
    height: 100%;
  }

  #frame.hidden{
    opacity: 0;
    transition: opacity 250ms;
  }

  #frame.shown {
    opacity: 1;
    transition: opacity 250ms;
  }
</style>
<div id="countdown" class="reset"></div>
<iframe id="frame"></iframe>
<script>
    var current = 0;
    var countdown = document.getElementById("countdown")
    var frame = document.getElementById("frame");
    var set_url = function() {
        var url = localStorage.getItem("rotate_URL_" + current);
        if(url) {
            frame.className = "hidden";
            window.setTimeout(function(){
                countdown.className = "reset";
                countdown.className = "burndown";
                frame.src = url;
                window.setTimeout(function(){frame.className = "shown";}, 300);
            }, 300);
            current ++;
        }else{
         current = 0;
        }
    };

    window.setInterval(set_url, 60000);
    set_url();
</script>
</body>
</html>
